<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Budget Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js library - can be replaced with local file -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Simple Budget Tracker</h1>
        </header>

        <main>
            <!-- Annual Budget Section -->
            <section class="annual-budget">
                <h2>Annual Budget Setup</h2>
                <div class="form-group">
                    <label for="maxCash">Max Available Cash Per Year ($):</label>
                    <input type="number" id="maxCash" placeholder="Enter your annual budget" min="0" step="0.01">
                </div>
                <div class="import-section">
                    <h3>Import Budget Data</h3>
                    <p>Upload a feed.json file to automatically populate your budget items and settings.</p>
                    
                    <div class="import-group">
                        <label for="feedFile">Select feed.json file:</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="feedFile" accept="application/json,.json">
                            <button type="button" id="importFeedBtn">Import Feed</button>
                        </div>
                        <span id="importStatus" class="import-status"></span>
                    </div>
                    
                    <div class="import-preview" id="importPreview" style="display: none;">
                        <h4>Preview:</h4>
                        <div class="preview-content">
                            <div class="preview-settings">
                                <strong>Settings:</strong>
                                <span id="previewMaxCash">-</span>
                            </div>
                            <div class="preview-items">
                                <strong>Items:</strong>
                                <span id="previewItemsCount">0</span> items found
                            </div>
                        </div>
                        <button type="button" id="confirmImportBtn" class="confirm-btn">Confirm Import</button>
                        <button type="button" id="cancelImportBtn" class="cancel-btn">Cancel</button>
                    </div>
                    
                    <details class="json-format-help">
                        <summary>Expected JSON Format</summary>
                        <pre><code>{
  "settings": {
    "maxCash": 100000,
    "currency": "USD"
  },
  "items": [
    {
      "name": "rent",
      "value": 1200,
      "frequency": "monthly",
      "tags": ["housing", "essential"]
    }
  ]
}</code></pre>
                    </details>
                </div>
            </section>

            <!-- Budget Items Section -->
            <section class="budget-items">
                <h2>Budget Items</h2>
                <div class="add-item-form">
                    <div class="form-row">
                        <input type="text" id="itemName" placeholder="Item name" required>
                        <input type="number" id="itemValue" placeholder="Amount ($)" min="0" step="0.01" required>
                        <input type="text" id="itemTags" placeholder="Tags (optional)">
                        <select id="itemFrequency">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly" selected>Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                        <button id="addItemBtn" onclick="addItem()">Add Item</button>
                    </div>
                </div>
                <div class="items-list" id="itemsList">
                    <!-- Items will be added here dynamically -->
                </div>
            </section>

            <!-- Budget Indicators Section -->
            <section class="budget-indicators">
                <h2>Budget Indicators</h2>
                <div class="indicators-grid">
                    <div class="indicator">
                        <h3>Daily</h3>
                        <div class="indicator-value" id="dailyMax">$0.00</div>
                        <small>Max per day</small>
                    </div>
                    <div class="indicator">
                        <h3>Weekly</h3>
                        <div class="indicator-value" id="weeklyMax">$0.00</div>
                        <small>Max per week</small>
                    </div>
                    <div class="indicator">
                        <h3>Monthly</h3>
                        <div class="indicator-value" id="monthlyMax">$0.00</div>
                        <small>Max per month</small>
                    </div>
                    <div class="indicator">
                        <h3>Yearly</h3>
                        <div class="indicator-value" id="yearlyMax">$0.00</div>
                        <small>Max per year</small>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts">
                <h2>Budget Visualization</h2>
                <div class="charts-container">
                    <div class="chart-wrapper">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="remainingChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Dynamic Charts Section -->
            <section class="dynamic-charts">
                <h2>Custom Charts</h2>
                <p>Create custom pie charts to analyze your budget by specific tags, frequencies, or combinations.</p>
                
                <div class="chart-controls">
                    <div class="control-group">
                        <h3>Add New Chart</h3>
                        <div class="chart-options">
                            <div class="filter-option">
                                <label for="chartType">Chart Type:</label>
                                <select id="chartType">
                                    <option value="tag">By Tag</option>
                                    <option value="frequency">By Frequency</option>
                                    <option value="combined">Tag + Frequency</option>
                                </select>
                            </div>
                            
                            <div class="filter-option" id="tagFilterGroup">
                                <label for="tagChartSelect">Select Tag:</label>
                                <select id="tagChartSelect">
                                    <option value="" disabled selected>Choose tag</option>
                                    <option value="__all__">All Items</option>
                                </select>
                            </div>
                            
                            <div class="filter-option" id="freqFilterGroup" style="display: none;">
                                <label for="freqChartSelect">Select Frequency:</label>
                                <select id="freqChartSelect">
                                    <option value="" disabled selected>Choose frequency</option>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                            
                            <div class="filter-option" id="combinedFilterGroup" style="display: none;">
                                <label for="combinedTagSelect">Tag:</label>
                                <select id="combinedTagSelect">
                                    <option value="" disabled selected>Choose tag</option>
                                    <option value="__all__">All Tags</option>
                                </select>
                                <label for="combinedFreqSelect">Frequency:</label>
                                <select id="combinedFreqSelect">
                                    <option value="" disabled selected>Choose frequency</option>
                                    <option value="__all__">All Frequencies</option>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="chart-actions">
                            <button type="button" id="addCustomChartBtn" class="add-chart-btn">Add Chart</button>
                            <button type="button" id="clearAllChartsBtn" class="clear-charts-btn">Clear All Charts</button>
                        </div>
                    </div>
                </div>
                
                <div id="dynamicCharts" class="dynamic-charts-container">
                    <!-- Dynamic charts will be added here -->
                </div>
                
                <div class="no-charts-message" id="noChartsMessage">
                    <p>No custom charts created yet. Use the controls above to create your first chart!</p>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="summary">
                <h2>Budget Summary</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="label">Total Monthly Expenses:</span>
                        <span class="value" id="totalMonthly">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Total Annual Expenses:</span>
                        <span class="value" id="totalAnnual">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Remaining Annual Budget:</span>
                        <span class="value" id="remainingBudget">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Budget Status:</span>
                        <span class="value" id="budgetStatus">-</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>